name: Parallel cypress tests with cypress-split
on: [push]
jobs:
  cypress-split:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        containers: [1, 2, 3]
    steps:
      - name: Run split Cypress tests ğŸ§ª
        env:
          SPLIT: ${{ strategy.job-total }}
          SPLIT_INDEX: ${{ strategy.job-index }}
        run: |
          echo ...testing "$SPLIT" "$SPLIT_INDEX" testing... ğŸ§ª
      # - run: echo "ğŸ it works!"

# strategy:
#   fail-fast: false
#   matrix:
#     containers: [1, 2, 3]
# steps:
#   - name: Run split Cypress tests ğŸ§ª
#     uses: cypress-io/github-action@v5
#     # pass the machine index and the total number
#     env:
#       SPLIT: ${{ strategy.job-total }}
#       SPLIT_INDEX: ${{ strategy.job-index }}
